OBJ=lab2
LIBWBPATH=/projects/bche/labs/libwb
DEBUG_FLAGS = -g -G 

all:
	nvcc -std=c++11 -arch=sm_86 -I$(LIBWBPATH) -rdc=true -c $(OBJ).cu -o $(OBJ).o 
	nvcc -std=c++11 -arch=sm_86 -o $(OBJ) $(OBJ).o $(LIBWBPATH)/lib/libwb.so

debug:
	nvcc -std=c++11 $(DEBUG_FLAGS) -arch=sm_86 -I$(LIBWBPATH) -rdc=true -c $(OBJ).cu -o $(OBJ).o 
	nvcc -std=c++11 $(DEBUG_FLAGS) -arch=sm_86 -o $(OBJ) $(OBJ).o $(LIBWBPATH)/lib/libwb.so

clean:
	rm -f $(OBJ).o

cleanall: clean
	rm -f $(OBJ) *.out *.err

run:
	sbatch job.slurm

rundebug:
	sbatch job_sanitizer.slurm


runall:
	make all
	make run

make rundebugall:
	make all
	make debug
	make rundebug

